{% extends "base.html" %}
{% block title %}주문 상세{% endblock %}
{% block content %}
<h2>주문 상세 #{{ order.order_id }}</h2>

<div style="background:#f5f5f5; padding:20px; border-radius:8px; margin-bottom:20px;">
    <p><strong>주문자:</strong> {{ order.buyer_name }} ({{ order.buyer_phone or '-' }})</p>
    <p><strong>배송지:</strong> {{ order.shipping_address }}</p>
    <p><strong>주문일시:</strong> {{ order.order_date.strftime('%Y-%m-%d %H:%M') }}</p>
    <p><strong>상태:</strong> {{ order.status }}</p>
</div>

<h3>주문 상품</h3>
<table>
    <tr><th>상품명</th><th>수량</th><th>단가</th><th>소계</th></tr>
    {% for item in items %}
    <tr>
        <td>{{ item.product_name }}</td>
        <td>{{ item.quantity }}개</td>
        <td>{{ "{:,.0f}".format(item.price) }}원</td>
        <td>{{ "{:,.0f}".format(item.price * item.quantity) }}원</td>
    </tr>
    {% endfor %}
</table>

<p style="text-align:right; font-size:1.2em;"><strong>총액: {{ "{:,.0f}".format(order.total_amount) }}원</strong></p>

<div style="margin-top:20px;">
    <a href="{{ url_for('update_order', order_id=order.order_id, status='Processing') }}" class="btn">처리중</a>
    <a href="{{ url_for('update_order', order_id=order.order_id, status='Shipped') }}" class="btn">배송중</a>
    <a href="{{ url_for('update_order', order_id=order.order_id, status='Delivered') }}" class="btn">배송완료</a>
    <a href="{{ url_for('update_order', order_id=order.order_id, status='Cancelled') }}" class="btn" style="background:#dc3545;">취소</a>
</div>

<a href="{{ url_for('dashboard') }}">돌아가기</a>
{% endblock %}
